# Используем официальный образ Golang в качестве базового
FROM golang:1.22

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем файл go.mod и go.sum
COPY go.mod go.sum ./

# Загружаем зависимости
RUN go mod download

# Копируем остальные файлы проекта в контейнер
COPY . .

# Сборка приложения
RUN go build -o app ./cmd/parser/main.go

# Устанавливаем права 777 для файла ./app
RUN chmod 777 ./app

# Устанавливаем команду запуска контейнера
CMD ["./app"]